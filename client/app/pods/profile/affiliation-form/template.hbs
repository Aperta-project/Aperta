<div class="profile-section">

  <h1>Affiliations:</h1>

  {{#each model.affiliations as |affiliation|}}
    <div class="profile-affiliation">
      <div class="profile-affiliation-name">{{affiliation.name}}</div>
      <div class="glyphicon glyphicon-remove-circle profile-remove-affiliation" {{action "removeAffiliation" affiliation}}></div>
      <div>
        {{format-date affiliation.startDate}} - {{#if affiliation.isCurrent}} Current {{else}} {{format-date affiliation.endDate}} {{/if}}
      </div>
      <div>{{affiliation.email}}</div>
    </div>
  {{/each}}

  <a class="button-secondary button--grey button--small" {{action "showNewAffiliationForm"}}>
    <span class="glyphicon glyphicon-plus-sign"></span>
    Add New Affiliation
  </a>

  {{#if showAffiliationForm}}
    <div class="profile-affiliations-form animation-fade-in">
      <h3>
        New Affiliation
      </h3>
      {{select-2-single
          class="profile-affiliation-field"
          placeholder="Affiliation Name"
          source=selectableInstitutions
          value=newAffiliation.name}}
      {{error-message message=validationErrors.name}}

      <div class="form-group">
        {{#datepicker-group}}
          {{date-picker type="text"
                        role="startPicker"
                        date=newAffiliation.startDate
                        placeholder="Start Date"}}

          {{date-picker type="text"
                        role="endPicker"
                        date=newAffiliation.endDate
                        placeholder="End Date"}}
        {{/datepicker-group}}

        {{input type="text"
                value=newAffiliation.email
                placeholder="Email Address"
                class="profile-affiliation-field form-control"}}
      </div>

      <button class="button-secondary button--green" {{action "commitAffiliation" newAffiliation}}>done</button>
      <a class="button-link author-cancel" {{action "hideNewAffiliationForm"}}>cancel</a>
    </div>
  {{/if}}

</div>
