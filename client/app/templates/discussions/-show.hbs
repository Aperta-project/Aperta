<div class="sheet-toolbar">
  {{link-to "< Back" topicsIndexPath class="sheet-toolbar-button"}}
</div>

<div class="sheet-content discussions-show-content">
  <div class="discussions-show-header">
    <h1 class="discussions-show-title {{if validationErrors.title "error"}}">
      {{#if (can "edit" model)}}
        {{error-message message=validationErrors.title
                        displayIcon=true
                        displayText=false}}
        {{input value=model.title class="edit-comment-title-field" focus-out="saveTopic"}}
      {{else}}
        {{model.title}}
      {{/if}}
    </h1>

    {{participant-selector currentParticipants=participants
                           url=discussionParticipantUrl
                           label="Participants:"
                           displayEmails=true
                           afterOptionsComponent="discussions-participants-help-text"
                           canManage=(can "manage_participant" model)
                           onSelect=(action "saveNewParticipant")
                           onRemove=(action "removeParticipantByUserId")
                           searchStarted=(action "searchStarted")
                           searchFinished=(action "searchFinished")
                           searching=searchingParticipant}}
  </div>

  <div class="discussions-show-form">
    {{comment-board-form save=(action "postReply")
                         onChange=(action "commentDidChange")
                         onCancel=(action "commentDidCancel")
                         comment=inProgressComment
                         participants=participants
                         atMentionableStaffUsers=atMentionableStaffUsers}}
  </div>

  <br>

  <div class="discussions-show-messages">
    {{#each sortedReplies as |reply|}}
      {{discussion-reply reply=reply}}
    {{/each}}
  </div>
</div>
