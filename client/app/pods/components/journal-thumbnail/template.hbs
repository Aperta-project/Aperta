<div id="journal-{{journal.id}}">
{{#if showForm}}

  <div class="journal-thumbnail-edit-form animation-fade-in clearfix">

    <div class="journal-thumbnail-logo-upload">
      <div class="journal-thumbnail-logo">
        {{#if logoPreview}}
          <span class="journal-thumbnail-logo-preview"></span>
        {{else}}
          {{#if journal.logoUrl}}
            <img src={{journal.logoUrl}}>
          {{else}}
            {{partial "svg/default-journal-logo"}}
          {{/if}}
        {{/if}}
      </div>

      <span class="button-secondary fileinput-button button--blue knockout">
        <span>Upload New</span>
        {{file-uploader id=thumbnailId
                        accept=".jpg,.jpeg,.tiff,.gif,.png"
                        start="uploadStarted"
                        done="uploadFinished"
                        progress="uploadProgress"
                        cancel="cancelUploads"
                        processingDone="showPreview"
                        uploadReady="uploadReady"
                        filePrefix="journal/logo"
                        uploadImmediately=false
                        railsMethod="PUT"
                        url=logoUploadUrl}}
      </span>

      <span class="journal-thumbnail-logo-upload-note">(250px x 40px)</span>
      {{#if isUploading}}
        <div class="journal-thumbnail-logo-spinner">
          {{progress-spinner visible=true color="white"}}
        </div>
      {{/if}}
    </div>

    <div class="inset-form-control required {{if validationErrors.name "error"}}">
      <div class="inset-form-control-text">
        <label>Journal Title</label>
        {{error-message message=validationErrors.name displayIcon=true}}
      </div>
      {{input type="text"
              value=journal.name
              class="form-control journal-name-edit inset-form-control-input"
              placeholder="PLOS Yeti"}}
    </div>

    <div class="inset-form-control">
      <div class="inset-form-control-text">
        <label>Journal Description</label>
      </div>
      {{textarea value=journal.description
                 class="journal-description-edit inset-form-control-textarea"
                 placeholder="Accelerating the publication of peer-reviewed science"}}
    </div>

    <div class="inset-form-control required {{if validationErrors.doiJournalPrefix "error"}}">
      <div class="inset-form-control-text">
        <label>DOI Journal Prefix</label>
        {{error-message message=validationErrors.doiJournalPrefix displayIcon=true}}
      </div>
      {{textarea value=journal.doiJournalPrefix
                 class="journal-doi-journal-prefix-edit inset-form-control-input"
                 placeholder="journal.yetipub"}}
    </div>

    <div class="inset-form-control required {{if validationErrors.doiPublisherPrefix "error"}}">
      <div class="inset-form-control-text">
        <label>DOI Publisher Prefix</label>
        {{error-message message=validationErrors.doiPublisherPrefix displayIcon=true}}
      </div>
      {{textarea value=journal.doiPublisherPrefix
                 class="journal-doi-publisher-prefix-edit inset-form-control-input"
                 placeholder="yetipub"}}
    </div>

    <div class="inset-form-control required {{if validationErrors.lastDoiIssued "error"}}">
      <div class="inset-form-control-text">
        <label>Last DOI Issued</label>
        {{error-message message=validationErrors.lastDoiIssued displayIcon=true}}
      </div>
      {{textarea value=journal.lastDoiIssued
                 class="journal-last-doi-edit inset-form-control-input"
                 placeholder="1000001"}}
    </div>


    <div class="journal-edit-buttons">
      <a href="#" class="button-link button--white" {{action "cancel"}}>cancel</a>
      <a href="#" class="button-secondary button--blue knockout" {{action "saveJournalDetails"}}>Save</a>
    </div>

  </div>

{{else}}

  {{#link-to "admin.journal" journal class="journal-thumbnail-show animation-fade-in clearfix"}}
    <div class="journal-thumbnail-logo">
      {{#if journal.logoUrl}}
        <img src={{journal.logoUrl}}>
      {{else}}
        {{partial "svg/default-journal-logo"}}
      {{/if}}
    </div>
    <span class="journal-thumbnail-paper-count">{{journal.paperCount}} {{pluralize-string count=journal.paperCount string="article"}}</span>
    <h3 class="journal-thumbnail-name">{{journal.name}}</h3>
    <p>{{journal.description}}</p>
  {{/link-to}}

  {{#if canEdit}}
    <div class="fa fa-pencil edit-icon" {{action "editJournal"}}></div>
  {{/if}}

{{/if}}
</div>
