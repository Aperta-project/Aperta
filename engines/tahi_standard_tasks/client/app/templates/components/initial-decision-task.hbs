{{partial "task-completed-section"}}

<div class="task-main-content">
  {{#if isSavingData}}
    <div class="register-decision-saving-cover">
      {{progress-spinner visible=true size="large" center=true}}
    </div>
  {{/if}}

  {{#if initialDecisions}}
    {{rescind-decision
      decision=initialDecision
      isEditable=isEditable
      beforeRescind=(action "showSpinner")
      afterRescind=(action "hideSpinner")}}
  {{else if (eq task.paper.publishingState "unsubmitted")}}
    <div class="alert alert-warning">
      A decision cannot be registered at this time. The manuscript is
      unsubmitted.
    </div>
  {{/if}}

  <div class="decision-selections">
    <label class="decision-label">
      {{radio-button value="reject"
                     selection=initialDecision.verdict
                     disabled=nonPublishable
                     action=(action "setInitialDecisionVerdict")}}
      Reject
    </label>

    <label class="decision-label">
      {{radio-button value="invite_full_submission"
                     selection=initialDecision.verdict
                     disabled=nonPublishable
                     action=(action "setInitialDecisionVerdict")}}
      Invite for full submission
    </label>
  </div>

  <p>Please write your decision letter in the area below</p>

  {{textarea onEvent="false"
             class="decision-letter-field"
             disabled=nonPublishable
             value=initialDecision.letter}}

  <button class="button-primary button--green send-email-action {{if cannotRegisterDecision "button--disabled"}}"
          disabled={{cannotRegisterDecision}} {{action "registerDecision"}}>
    Register Decision and Email the Author
  </button>

  {{#if initialDecisions}}
    <hr>
    <h3>Decision History</h3>
    <div class="previous-decisions">
      {{#each initialDecisions as |decision|}}
        {{decision-bar decision=decision}}
      {{/each}}
    </div>
  {{/if}}
</div>
