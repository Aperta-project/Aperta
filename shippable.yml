language: ruby
rvm:
  - 2.1.2
addons:
  firefox: "23.0"
services:
  - selenium
before_script:
  - createuser -s tahi
  - psql -c 'create database tahi_development;' -U postgres
  - psql -c 'create database tahi_test;' -U postgres
  - bundle --without development
  - bundle exec rake db:migrate
  - bundle exec rake assets:precompile
  - "export DISPLAY=:99.0"
  - "/etc/init.d/xvfb start"
script:
  - bundle exec rake teaspoon
  - bundle exec rspec spec engines
after_script:
  - "/etc/init.d/xvfb stop"
