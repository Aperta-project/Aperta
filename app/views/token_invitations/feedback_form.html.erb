<%= tinymce_assets %>
<script
  src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous">
</script>

<%= render layout: 'container' do %>
  <div class='message'>
    <span class='bold'>You've successfully declined the invitation to
      review</span> "<%= @paper.title.html_safe %>". We're always trying to improve our
    invitation process and would appreciate your feedback below.
  </div>
  <div>
    <%= form_for @invitation, url: post_feedback_path(@invitation.token), method: 'post'  do |f| %>
      <%= f.label :decline_reason do %>
        <div style='margin-bottom: 0.5em;'>
          Please give your reasons for declining this invitation.
        </div>
      <% end %>
      <%= f.text_area :decline_reason, class: 'tinymce', id: 'invitation_decline_reason' %>
      <br/>

      <%= f.label :reviewer_suggestions do %>
        <div style='margin-bottom: 0.5em;'>
          We would value your suggestions of alternative reviewers for this manuscript.<br/>
          Please provide reviewers' names, institutions, and email addresses if known.
        </div>
      <% end %>
      <%= f.text_area :reviewer_suggestions, class: 'tinymce', id: 'invitation_reviewer_suggestions' %>
      <br/>

      <div class='flex-bar'>
        <%= link_to "No thank you", invitation_thank_you_path(@invitation.token), class: 'flex-item' %>
        <%= f.submit value: 'Send Feedback', class: 'button-secondary button--green flex-item' %>
      </div>
    <% end %>
  </div>
<% end %>

<script type="text/javascript">
  /* some tinymce options are snake_case */
  /* eslint-disable camelcase */

  $(document).ready(function () {
    var basicElements = 'p,br,strong/b,em/i,u,sub,sup,pre';
    var basicToolbar  = 'bold italic underline | subscript superscript | undo redo';
    var options = {
      selector: 'textarea.tinymce',
      branding: false,
      menubar: false,
      toolbar: basicToolbar,
      valid_elements: basicElements
    };

    window.tinyMCE.init(options);
  });
</script>
