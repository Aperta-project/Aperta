{{partial "task-completed-section"}}

<div class="task-main-content">
  {{#if activeInvitation}}
    {{edit-invitation allowAttachments=true
                      invitation=activeInvitation
                      closeAction=(action "cancelAction")}}
  {{else}}
    {{invitations-display groupByDecision=false
                          invitations=task.invitations}}

    <div class="invitation-email-entry">
      {{#auto-suggest endpoint=autoSuggestSourceUrl
                      queryParameter="query"
                      inputId="invitation-recipient"
                      errorMessage=pendingInvitation.errors.email.firstObject.message
                      placeholder="Invite Academic Editor by name or email"
                      parseResponseFunction=parseUserSearchResponse
                      itemSelected="didSelectUser"
                      inputChanged="inputChanged"
                      itemDisplayTextFunction=displayUserSelected
                      as |user|}}
        {{user.full_name}} [{{user.email}}]
      {{/auto-suggest}}

      <button class="button-secondary button--green invitation-email-entry-button {{unless selectedUser "button--disabled"}}"
              {{action "composeInvite"}}>
        Compose Invite
      </button>

      {{#if createInvitation.isRunning}}
        <div class="invitation-email-entry-progress animation-fade-in">
          {{progress-spinner visible=true size="small"}}
        </div>
      {{/if}}
    </div>
  {{/if}}
</div>
