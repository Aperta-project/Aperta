!function(){CKEDITOR.config.jqueryOverrideVal="undefined"==typeof CKEDITOR.config.jqueryOverrideVal?!0:CKEDITOR.config.jqueryOverrideVal;var e=window.jQuery;"undefined"!=typeof e&&(e.extend(e.fn,{ckeditorGet:function(){var e=this.eq(0).data("ckeditorInstance");if(!e)throw"CKEditor not yet initialized, use ckeditor() with callback.";return e},ckeditor:function(t,n){if(!CKEDITOR.env.isCompatible)return this;if(!e.isFunction(t)){var i=n;n=t,t=i}return n=n||{},this.filter("textarea, div, p").each(function(){var i=e(this),a=i.data("ckeditorInstance"),r=i.data("_ckeditorInstanceLock"),o=this;a&&!r?t&&t.apply(a,[this]):r?CKEDITOR.on("instanceReady",function(e){var n=e.editor;setTimeout(function(){return n.element?(n.element.$==o&&t&&t.apply(n,[o]),void 0):(setTimeout(arguments.callee,100),void 0)},0)},null,null,9999):((n.autoUpdateElement||"undefined"==typeof n.autoUpdateElement&&CKEDITOR.config.autoUpdateElement)&&(n.autoUpdateElementJquery=!0),n.autoUpdateElement=!1,i.data("_ckeditorInstanceLock",!0),a=CKEDITOR.replace(o,n),i.data("ckeditorInstance",a),a.on("instanceReady",function(e){var n=e.editor;setTimeout(function(){if(!n.element)return setTimeout(arguments.callee,100),void 0;if(e.removeListener("instanceReady",this.callee),n.on("dataReady",function(){i.trigger("setData.ckeditor",[n])}),n.on("getData",function(e){i.trigger("getData.ckeditor",[n,e.data])},999),n.on("destroy",function(){i.trigger("destroy.ckeditor",[n])}),n.config.autoUpdateElementJquery&&i.is("textarea")&&i.parents("form").length){var a=function(){i.ckeditor(function(){n.updateElement()})};i.parents("form").submit(a),i.parents("form").bind("form-pre-serialize",a),i.bind("destroy.ckeditor",function(){i.parents("form").unbind("submit",a),i.parents("form").unbind("form-pre-serialize",a)})}n.on("destroy",function(){i.data("ckeditorInstance",null)}),i.data("_ckeditorInstanceLock",null),i.trigger("instanceReady.ckeditor",[n]),t&&t.apply(n,[o])},0)},null,null,9999))}),this}}),CKEDITOR.config.jqueryOverrideVal&&(e.fn.val=CKEDITOR.tools.override(e.fn.val,function(t){return function(n,i){var a,r="undefined"!=typeof n;return this.each(function(){var o=e(this),d=o.data("ckeditorInstance");if(!i&&o.is("textarea")&&d){if(!r)return a=d.getData(),null;d.setData(n)}else{if(!r)return a=t.call(o),null;t.call(o,n)}return!0}),r?this:a}})))}();