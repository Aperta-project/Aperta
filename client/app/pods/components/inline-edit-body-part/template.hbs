{{!-- Copyright (c) 2018 Public Library of Science --}}

{{!-- Permission is hereby granted, free of charge, to any person obtaining a --}}
{{!-- copy of this software and associated documentation files (the "Software"), --}}
{{!-- to deal in the Software without restriction, including without limitation --}}
{{!-- the rights to use, copy, modify, merge, publish, distribute, sublicense, --}}
{{!-- and/or sell copies of the Software, and to permit persons to whom the --}}
{{!-- Software is furnished to do so, subject to the following conditions: --}}

{{!-- The above copyright notice and this permission notice shall be included in --}}
{{!-- all copies or substantial portions of the Software. --}}

{{!-- THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR --}}
{{!-- IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, --}}
{{!-- FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL --}}
{{!-- THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER --}}
{{!-- LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING --}}
{{!-- FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER --}}
{{!-- DEALINGS IN THE SOFTWARE. --}}

<div class="inline-edit-body-part clearfix {{if confirmDelete "confirm-delete"}} {{if editing "editing"}} {{block.type}}">
  {{yield editing}}

  {{#if canManage}}
    <div class="view-actions">
      {{#unless (eq block.type "text")}}
        <span class="fa fa-pencil inline-edit-icon" {{action "toggleEdit"}}></span>
      {{/unless}}
      <span class="fa fa-trash inline-edit-icon" {{action "confirmDeletion"}}></span>
    </div>

    <div class="edit-actions">
      <div class="button-secondary button--green pull-right save-block {{unless block.hasContent "button--disabled"}}" {{action "save"}}>Save</div>
      <div class="button-link button--green pull-right cancel-block" {{action "toggleEdit"}}>cancel</div>
    </div>

    {{#if editing}}
      <div class="button-secondary button--green add-item" {{action addItem}}>
        {{fa-icon icon="plus"}}
      </div>
    {{/if}}
  {{/if}}

  {{#if confirmDelete}}
    <div class="bodypart-destroy-overlay bodypart-overlay">
      <h4>This will permanently delete your item. Are you sure?</h4>
      <br>
      <button class="button-link button--white" {{action "cancelDeletion"}}>cancel</button>
      <button class="button-secondary button--green delete-button" {{action attrs.delete}}>Delete Forever</button>
    </div>
  {{/if}}
</div>
