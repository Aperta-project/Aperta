<!--[if lte IE 9]>
  <h2 class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</h2>
<![endif]-->

<script>
  // This really only works for IE10. Starting with IE11, the user agent no longer indicates IE version.
  // http://stackoverflow.com/questions/18871760/how-to-detect-ie-11-with-javascript-in-asp-net
  var showIENotification = function() {
    var IERegex = /MSIE\s?(\d+)(?:\.(\d+))?/i;
    var matches = navigator.userAgent.match(IERegex);

    if (matches != null && parseInt(matches[1]) >= 10) {
      $('#tahi-container').prepend("<h3 class='browsehappy'>You are using an <strong>unsupported</strong> browser. #{app_name} works best in open source browsers, such as Firefox and Chrome. Please <a href='http://browsehappy.com/'>upgrade your browser</a> to improve your experience.</h3>");
    }
  }

  showIENotification();
</script>

<div class="auth-container">
  <div class='logo'>
    <img class='plos auth-logo' src='/images/plos_logo.png' />
  </div>
  <h1>Welcome to <%= app_name %></h1>
  <p>Submit &amp; manage manuscripts.</p>

  <div class="available-journals-message">
    <p>
      Aperta&nbsp;accepts&nbsp;new&nbsp;submissions&nbsp;to&nbsp;<strong>PLOS&nbsp;Biology</strong>&nbsp;for&nbsp;now.
      It&nbsp;will&nbsp;be&nbsp;rolled&nbsp;out&nbsp;to&nbsp;all&nbsp;PLOS&nbsp;titles&nbsp;in&nbsp;the&nbsp;coming&nbsp;months.<br />
      Microsoft Word files only (LaTeX coming soon!)<br />
      <a href="http://journals.plos.org/plosbiology/s/submit-now">More information</a> about submitting to PLOS Biology.
    </p>
    <p>
      To submit to one of our other journals, start <a href="https://www.plos.org/which-journal-is-right-for-me">here</a>.
    </p>
  </div>

  <% if flash.present? %>
    <% if notice %>
      <p class="auth-flash auth-flash--notice"><%= notice %> <span onclick="this.parentElement.remove()">&times;</span></p>
    <% end %>
    <% if alert %>
      <p class="auth-flash auth-flash--alert"><%= alert %> <span onclick="this.parentElement.remove()">&times;</span></p>
    <% end %>
  <% end %>

  <div class="methods">

    <% if Rails.configuration.password_auth_enabled %>
      <div class="auth-left auth-group">
        <%= form_for(resource, :as => resource_name, :url => session_path(resource_name)) do |f| %>
          <div class="auth-field auth-field--text-input">
            <%= f.text_field :login, :autofocus => true, placeholder: "Login" %>
          </div>

          <div class="auth-field auth-field--text-input">
            <%= f.password_field :password, placeholder: "Password" %>
            <br>

            <%- if devise_mapping.recoverable? && controller_name != 'passwords' && controller_name != 'registrations' %>
              <%= link_to "Forgot your password?", new_password_path(resource_name) %><br>
            <% end -%>
          </div>

          <% if devise_mapping.rememberable? -%>
            <label class="auth-remember-me">
              <%= f.check_box :remember_me %>
              Remember me
            </label>
          <% end -%>

          <%= f.submit "Sign in", class: "button-primary button--green auth-signin" %>
          &nbsp; &nbsp;
          <%- if devise_mapping.registerable? && controller_name != "registrations" %>
            <%= link_to "Sign up", new_registration_path(resource_name), class: "auth-signup" %><br>
          <% end -%>
          <br>
        <% end %>
      </div>
    <% end %>

    <% if Rails.configuration.omniauth_providers.present? %>
      <div class="auth-right auth-group">
        <%= render "devise/shared/links" %>
      </div>
    <% end %>

  </div>
</div>
</html>
