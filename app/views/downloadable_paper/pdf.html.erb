<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <!-- Also set in /config/environment.js -->
    <script type="text/javascript" async
            src="https://cdn.mathjax.org/mathjax/2.6-latest/MathJax.js?config=MML_HTMLorMML-full">
    </script>

    <style>
      /*Embedding the style inline because the pdf is created in another process
      and we want to avoid the request failing if authentication
      changes, or the asset host is misconfigured.*/
      <%= Sass.compile(File.read(File.join(Rails.root, 'app', 'assets', 'stylesheets', 'pdf.scss'))) %>

      <%= publishing_info_presenter.css %>
      <%= paper.journal.pdf_css %>
    </style>
  </head>
  <body>
    <div id='publishing-information'>
      <%= publishing_info_presenter.html.html_safe %>
    </div>

    <div id='paper-body' styles='page-break-before: always;'>
      <h1><%= paper.display_title(sanitized: false) %></h1>
      <%= paper_body %>
    </div>

    <%= render partial: 'supporting_information',
               locals: { paper: paper,
                         should_proxy_previews: should_proxy_previews } %>
  </body>
</html>
